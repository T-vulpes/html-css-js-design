<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deniz ToDo</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

        :root {
            --high-color: #ff4757;
            --med-color: #ffa502;
            --low-color: #2ed573;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            min-height: 100vh;
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            display: flex; justify-content: center; align-items: flex-start;
            padding-top: 60px; overflow-x: hidden;
        }

        header {
            position: absolute; top: 20px; width: 90%; max-width: 1200px;
            display: flex; justify-content: space-between; align-items: center;
        }

        h1 {
            color: #333; text-shadow: 0 2px 0 rgba(255,255,255,0.5);
            letter-spacing: 1px; font-size: 1.8rem; font-weight: 800;
        }

        .save-btn {
            background: #333; color: white; border: none;
            padding: 12px 30px; border-radius: 50px;
            font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.2s, background 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        .save-btn:hover { transform: translateY(-2px); background: #000; }
        .save-btn:active { transform: translateY(1px); }

        .board {
            display: flex; gap: 25px; width: 90%; max-width: 1200px;
            align-items: flex-start; margin-top: 30px;
        }

        .column {
            flex: 1;
            background: rgba(255, 255, 255, 0.6); 
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            padding: 20px;
            min-height: 400px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.05);
            transition: background 0.2s;
        }

        .column h2 {
            color: #333; font-size: 1.1rem; margin-bottom: 20px;
            border-bottom: 2px solid rgba(0,0,0,0.05); padding-bottom: 10px;
            display: flex; justify-content: space-between;
        }

        .task-count {
            background: #fff; padding: 2px 10px;
            border-radius: 12px; font-size: 0.8rem; color: #666;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
      
        .task {
            background: #fff; padding: 15px; border-radius: 8px;
            margin-bottom: 15px; cursor: grab;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
            font-size: 0.95rem; color: #444; font-weight: 600;
            display: flex; justify-content: space-between; align-items: center;
            position: relative; border-left: 5px solid transparent; 
            transition: transform 0.2s;
        }
        
        .task:active { cursor: grabbing; }
        .task.dragging { opacity: 0.5; transform: scale(0.95); }

        .task[data-priority="high"] { border-left-color: var(--high-color); }
        .tag.high { background: var(--high-color); }

        .task[data-priority="med"] { border-left-color: var(--med-color); }
        .tag.med { background: var(--med-color); }

        .task[data-priority="low"] { border-left-color: var(--low-color); }
        .tag.low { background: var(--low-color); }

        .tag {
            font-size: 0.65rem; padding: 4px 8px;
            border-radius: 4px; color: white; margin-right: 10px;
            text-transform: uppercase; letter-spacing: 0.5px;
        }

        .task-text { flex: 1; } 
        .delete-btn {
            background: #eee; color: #888; border: none;
            width: 24px; height: 24px; border-radius: 50%;
            cursor: pointer; font-size: 0.8rem; opacity: 0;
            transition: all 0.2s; display: flex; justify-content: center; align-items: center;
        }
        .delete-btn:hover { background: #ff4757; color: white; }
        .task:hover .delete-btn { opacity: 1; }

        .add-form {
            margin-top: 15px; background: rgba(255,255,255,0.5);
            padding: 10px; border-radius: 10px;
        }
        
        .form-row { display: flex; gap: 8px; margin-top: 8px; }
        
        .task-input {
            width: 100%; padding: 10px; border: 1px solid transparent; border-radius: 6px;
            outline: none; font-size: 0.9rem; margin-bottom: 5px;
            transition: border 0.3s;
        }
        .task-input:focus { border-color: #aaa; }
        
        .priority-select {
            flex: 1; padding: 0 5px; border: none; border-radius: 6px;
            font-size: 0.8rem; cursor: pointer; background: #fff; color: #555;
        }
        
        .add-btn {
            background: #333; color: white; border: none;
            padding: 8px 15px; border-radius: 6px; cursor: pointer;
            font-weight: bold; font-size: 1.2rem; line-height: 1;
        }
        .add-btn:hover { background: #000; }

        .column.drag-over { background: rgba(255, 255, 255, 0.8); box-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }

    </style>
</head>
<body>

    <header>
        <h1>Deniz  TODO</h1>
        <button class="save-btn" onclick="saveBoard()">
            <span>ðŸ’¾</span> Save Board
        </button>
    </header>

    <div class="board">
        
        <div class="column" id="todo">
            <h2>ðŸš€ To Do <span class="task-count">0</span></h2>
            <div class="task-list"></div>
            
            <div class="add-form">
                <input type="text" class="task-input" placeholder="New Task...">
                <div class="form-row">
                    <select class="priority-select">
                        <option value="high">High Priority</option>
                        <option value="med">Medium</option>
                        <option value="low">Low Priority</option>
                    </select>
                    <button class="add-btn" onclick="addTask('todo')">+</button>
                </div>
            </div>
        </div>

        <div class="column" id="inprogress">
            <h2>âš¡ In Progress <span class="task-count">0</span></h2>
            <div class="task-list"></div>
            
            <div class="add-form">
                <input type="text" class="task-input" placeholder="New Task...">
                <div class="form-row">
                    <select class="priority-select">
                        <option value="high">High Priority</option>
                        <option value="med">Medium</option>
                        <option value="low">Low Priority</option>
                    </select>
                    <button class="add-btn" onclick="addTask('inprogress')">+</button>
                </div>
            </div>
        </div>

        <div class="column" id="done">
            <h2>âœ… Done <span class="task-count">0</span></h2>
            <div class="task-list"></div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadBoard(); 
        });

        function addTask(columnId) {
            const column = document.getElementById(columnId);
            const input = column.querySelector('.task-input');
            const priority = column.querySelector('.priority-select').value;
            const taskList = column.querySelector('.task-list');
            const text = input.value.trim();

            if (text === '') return alert("Please write a task!");

            const taskHTML = createTaskHTML(text, priority);
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = taskHTML;
            const newTask = tempDiv.firstElementChild;

            taskList.appendChild(newTask);
            input.value = '';
            attachDragEvents(newTask);
            updateCounts();
        }

        function createTaskHTML(text, priority) {
            let label = priority === 'med' ? 'MED' : priority.toUpperCase(); 
            if(priority === 'high') label = 'HIGH';
            if(priority === 'low') label = 'LOW';

            return `
                <div class="task" draggable="true" data-priority="${priority}">
                    <span class="tag ${priority}">${label}</span>
                    <span class="task-text">${text}</span>
                    <button class="delete-btn" onclick="removeTask(this)">âœ•</button>
                </div>
            `;
        }

        function removeTask(btn) {
            const task = btn.closest('.task');
            task.remove();
            updateCounts();
        }

        function attachDragEvents(taskElement) {
            const tasks = taskElement ? [taskElement] : document.querySelectorAll('.task');

            tasks.forEach(task => {
                task.addEventListener('dragstart', () => {
                    task.classList.add('dragging');
                });

                task.addEventListener('dragend', () => {
                    task.classList.remove('dragging');
                    updateCounts(); 
                });
            });
        }

        document.querySelectorAll('.column').forEach(column => {
            column.addEventListener('dragover', (e) => {
                e.preventDefault(); 
                column.classList.add('drag-over');
                
                const draggable = document.querySelector('.dragging');
                const taskList = column.querySelector('.task-list');
                taskList.appendChild(draggable);
            });

            column.addEventListener('dragleave', () => {
                column.classList.remove('drag-over');
            });

            column.addEventListener('drop', () => {
                column.classList.remove('drag-over');
                updateCounts();
            });
        });

        function updateCounts() {
            document.querySelectorAll('.column').forEach(col => {
                const count = col.querySelectorAll('.task').length;
                col.querySelector('.task-count').innerText = count;
            });
        }

        function saveBoard() {
            const data = {
                todo: getColumnData('todo'),
                inprogress: getColumnData('inprogress'),
                done: getColumnData('done')
            };
            
            localStorage.setItem('kanbanBoardData', JSON.stringify(data));
            const btn = document.querySelector('.save-btn');
            const originalHtml = btn.innerHTML;
            btn.innerHTML = "<span>âœ…</span> Saved!";
            btn.style.background = "#2ed573";
            
            setTimeout(() => {
                btn.innerHTML = originalHtml;
                btn.style.background = "#333";
            }, 1500);
        }

        function getColumnData(columnId) {
            const tasks = [];
            const list = document.getElementById(columnId).querySelector('.task-list');
            list.querySelectorAll('.task').forEach(task => {
                tasks.push({
                    text: task.querySelector('.task-text').innerText, 
                    priority: task.getAttribute('data-priority')
                });
            });
            return tasks;
        }

        function loadBoard() {
            const data = JSON.parse(localStorage.getItem('kanbanBoardData'));
            if (!data) return;

            ['todo', 'inprogress', 'done'].forEach(colId => {
                const list = document.querySelector(`#${colId} .task-list`);
                list.innerHTML = ''; 
                
                if (data[colId]) {
                    data[colId].forEach(taskData => {
                        const taskHTML = createTaskHTML(taskData.text, taskData.priority);
                        list.insertAdjacentHTML('beforeend', taskHTML);
                    });
                }
            });
            
            attachDragEvents(); 
            updateCounts();
        }

        document.querySelectorAll('.task-input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if(e.key === 'Enter') {
                    this.parentElement.querySelector('.add-btn').click();
                }
            });
        });

    </script>

</body>
</html>
